{"ts":1368431703031,"silentsave":true,"restoring":false,"patch":[[{"diffs":[[1,"/* MessageBox by Victor Hornets\n * 2013\n * ---------------------------\n * http://vh-m.net/\n * https://github.com/Vhornets\n * ---------------------------\n * Usage:\n * var someVar = new MessageBox();\n * someVar.setContent(str TITLE, [str BODY, str PAGE_LINK], bool LOAD_PAGE);\n*/\n\nvar MessageBox = (function () {\n    function MessageBox() {\n        this.delta = [];\n        this.docW = $(window).width();\n        this.docH = $(window).height();\n        this.createBox();\n        this.initDragObject(\".message-block-header\");\n    }\n    MessageBox.prototype.initDragObject = function (obj) {\n        var _this = this;\n        $(obj).mousedown(function (e) {\n            _this.dragObject = $(obj).parent();\n            _this.delta['X'] = e.clientX - _this.dragObject.offset().left;\n            _this.delta['Y'] = e.clientY - _this.dragObject.offset().top;\n            _this.maxW = _this.dragObject.width() + 5;\n            _this.maxH = _this.dragObject.height() + 5;\n            _this.startDrag();\n            return false;\n        });\n        $(document, obj).mouseup(function (e) {\n            $(document).unbind('mousemove');\n            _this.dragObject = null;\n        });\n    };\n    MessageBox.prototype.startDrag = function () {\n        var _this = this;\n        $(document).mousemove(function (e) {\n            _this.dragObject.offset({\n                top: e.clientY - _this.delta['Y'],\n                left: e.clientX - _this.delta['X']\n            });\n            _this.calculateBorders(_this.dragObject, e);\n            return false;\n        });\n    };\n    MessageBox.prototype.calculateBorders = function (target, e) {\n        var leftPosition = target.position().left;\n        var topPosition = target.position().top;\n        if(leftPosition + this.maxW >= this.docW) {\n            target.offset({\n                left: this.docW - this.maxW,\n                top: e.clientY - this.delta['Y'] + $(window).scrollTop()\n            });\n        }\n        if(topPosition + this.maxH >= this.docH) {\n            target.offset({\n                top: this.docH - this.maxH + $(window).scrollTop(),\n                left: e.clientX - this.delta['X']\n            });\n        }\n        if(topPosition + this.maxH >= this.docH && leftPosition + this.maxW >= this.docW) {\n            target.offset({\n                top: this.docH - this.maxH + $(window).scrollTop(),\n                left: this.docW - this.maxW\n            });\n        }\n        if(leftPosition <= 0) {\n            target.offset({\n                left: 0,\n                top: e.clientY - this.delta['Y'] + $(window).scrollTop()\n            });\n        }\n        if(topPosition <= 0) {\n            target.offset({\n                top: 0 + $(window).scrollTop(),\n                left: e.clientX - this.delta['X']\n            });\n        }\n        if(topPosition <= 0 && target.position().left <= 0) {\n            target.offset({\n                top: 0 + $(window).scrollTop(),\n                left: 0\n            });\n        }\n        if(leftPosition <= 0 && topPosition + this.maxH >= this.docH) {\n            target.offset({\n                left: 0,\n                top: this.docH - this.maxH + $(window).scrollTop()\n            });\n        }\n        if(topPosition <= 0 && leftPosition + this.maxW >= this.docW) {\n            target.offset({\n                top: 0 + $(window).scrollTop(),\n                left: this.docW - this.maxW\n            });\n        }\n    };\n    MessageBox.prototype.initCloseEvent = function () {\n        $(\".message-block-close, #message-block-bg\").click(function () {\n            $(\".message-block\").remove();\n            $(\"#message-block-bg\").remove();\n        });\n    };\n    MessageBox.prototype.createBox = function () {\n        $(document.body).prepend(\"<div id='message-block-bg'></div>\");\n        $(\"#message-block-bg\").show();\n        $(\"#message-block-bg\").after(\"<div class='message-block'>\" + \"<div class='message-block-header'>\" + \"<span class='message-block-header-text'></span><span class='message-block-close'>&#x2715;</span>\" + \"</div>\" + \"<div class='message-block-body'></div>\" + \"</div>\");\n        $(\".message-block\").offset({\n            top: (this.docH / 2) - ($(\".message-block\").height() / 2) + $(window).scrollTop(),\n            left: (this.docW / 2) - ($(\".message-block\").width() / 2)\n        });\n        this.initCloseEvent();\n    };\n    MessageBox.prototype.setContent = function (headerTtext, bodyText, loadPage) {\n        $(\".message-block-header-text\").html(headerTtext);\n        if(!loadPage) {\n            $(\".message-block-body\").html(bodyText);\n        } else {\n            $.ajax({\n                url: bodyText,\n                cache: false,\n                success: function(data) {\n                    $(\".message-block-body\").html(data);\n                }\n            });\n        }\n        $(\".message-block\").show('slow');\n    };\n    return MessageBox;\n})();"]],"start1":0,"start2":0,"length1":0,"length2":4890}]],"length":4890}
{"contributors":[],"silentsave":false,"ts":1368435180778,"patch":[[{"diffs":[[0,"dow).scrollTop()"],[1," + 10"],[0,"\n            });"]],"start1":1908,"start2":1908,"length1":32,"length2":37}]],"length":4895,"saved":false}
{"ts":1368435223331,"patch":[[{"diffs":[[0,"op()"],[-1," + 10"],[0,"\n   "]],"start1":1920,"start2":1920,"length1":13,"length2":8}]],"length":4890,"saved":false}
{"ts":1368435256211,"patch":[[{"diffs":[[0,"'Y']"],[-1," + $(window).scrollTop()"],[0,"\n   "]],"start1":1896,"start2":1896,"length1":32,"length2":8}]],"length":4866,"saved":false}
{"ts":1368435290550,"patch":[[{"diffs":[[0,"'Y']"],[-1," + $(window).scrollTop()"],[0,"\n   "]],"start1":2537,"start2":2537,"length1":32,"length2":8}]],"length":4842,"saved":false}
